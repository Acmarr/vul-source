Distro kernels
--------------

Ubuntu kernels as part of the archive are listed here:
<https://wiki.ubuntu.com/Kernel/Dev/ABIPackages>

LTS HWE backport kernels from interim releases are typically not
supported once the next LTS backport kernel is available. For example,
once the linux 6.2 (mantic 23.10) kernel was brought back to Ubuntu
22.04 LTS (jammy), the prior HWE kernel in jammy, linux-5.19, no
longer receives updates.  In older releases, the source package
names were based on the release codename, e.g. linux-lts-trusty,
linux-lts-quantal, and linux-lts-saucy.

## Additional infrastructure for retriaging kernel CVEs.

### Upstream kernel trees

It is useful to have a reference clone of the upstream [linux] kernel,
as well as the [linux-stable] and [linux-next] trees. Additionally,
the `~/.ubuntu-cve-tracker.conf` file can be configured to point at the
reference tree for researching issues using the `linux_kernel_path`
variable. An example snippet to place in `~/.ubuntu-cve-tracker.conf`:

```
# where to find a clone of the upstream linux, linux-stable, and
# linux-next kernel trees; see README.linux for more details
linux_kernel_path='/path/to/git/kernel-trees/linux-reference/'
```

To set the tree up appropriately, edit ~/.ubuntu-cve-tracker.conf and
then do something like the following:

```shell
. ~/.ubuntu-cve-tracker.conf
git clone https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git "$linux_kernel_path"
cd "$linux_kernel_path"
git remote add stable https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git
git remote add next https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git
git fetch --all
```

With this in place, the tool `scripts/kernel-find-fix` will be able to
look up potential break commits using the Fixes: field from kernel git
commits.

[linux]: https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
[linux-stable]: https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git
[linux-next]: https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git

### Tools for identifying kernel fixes

It is useful to look at some other projects to see if they have
potentially identified fixes for kernel vulnerabilities. The three
common ones are the

- [Upstream kernel CNA repo][linux-cna]
- [Debian's kernel security tracker][debian-kernel]
- Nicholas Leudtke's [linux github tracker][linux-github]

The three of them can be configured as references in
`~/.ubuntu-cve-tracker.conf` for use with tools, via the
`linux_cna_tracker`, `debian_kernel_cve_tracker` and
`linux_kernel_cve_tracker` variables respectively. An example:

```
# path to a copy of the upstream kernel CNA tracker from
# https://git.kernel.org/pub/scm/linux/security/vulns.git/
linux_cna_tracker='/path/to/git/cve_trackers/linux-cna/'

# path to a copy of the linux kernel cve tracker from
# https://github.com/nluedtke/linux_kernel_cves.git
linux_kernel_cve_tracker='/path/to/git/cve_trackers/linux_kernel_cves/'

# path to a copy of the debian kernel cve tracker from
# https://salsa.debian.org/kernel-team/kernel-sec.git
debian_kernel_cve_tracker='/path/to/git/cve_trackers/debian-kernel-sec/'
```

With these configured, the scripts `kernel-triage-missing-break-fix` and
`kernel-retriage-cve` can be used to look for CVEs where we have
not identified a fixing commit, but the other projects may have already
done so.

**TODO**: add support for examining the linux cna repo

[linux-cna]: https://git.kernel.org/pub/scm/linux/security/vulns.git/
[debian-kernel]: https://salsa.debian.org/kernel-team/kernel-sec.git
[linux-github]: https://github.com/nluedtke/linux_kernel_cves.git
